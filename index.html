<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>truedhrec</title>
  </head>
  <script>
  var commanders, baseURL = "https://edhrec-json.s3.amazonaws.com/en/commanders/"
  var allData = []
  var combos = [

    "w",
    "u",
    "b",
    "r",
    "g",
    "colorless",

    "wu",
    "wb",
    "wr",
    "wg",
    "ub",
    "ur",
    "ug",
    "br",
    "bg",
    "rg",

    "wub", //esper
    "wur", //jeskai
    "wug", //bant
    "wbr", //mardu
    "wbg", //abzan
    "wrg", //naya
    "ubr", //grixis
    "urg", //temur
    "ubg", //sultai
    "brg", //jund

    "wbrg",
    "wurg",
    "wubg",
    "wubr",
    "ubrg",

    "wubrg"

  ]

  var count = 0
  function init () {
    // fetch("https://edhrec-json.s3.amazonaws.com/en/commanders/u.json").then(res => res.json()).then(handleData)

    recursiveFetch()
  }


  function recursiveFetch(data = false) { //COUNT MUST BE 0 BEFORE CALLING THIS
    if (data !== false) {
      allData.push( {"name": combos[count], "data": data} )
    }

    //

    fetch(baseURL +  combos[count] + '.json', {
  "headers": {
    "accept": "application/json, text/plain, */*",
    "accept-language": "en-US,en;q=0.9",
    "cache-control": "no-cache",
    "pragma": "no-cache",
    "sec-fetch-dest": "empty",
    "sec-fetch-mode": "cors",
    "sec-fetch-site": "cross-site"
  },
  "referrer": document.location.href,
  "referrerPolicy": "no-referrer-when-downgrade",
  "body": null,
  "method": "GET",
  "mode": "no-cors",
  "credentials": "omit"
}).then(res => res.json).then(updateData)

  }

  function handleRecursiveFetch() {
    recursiveFetch(tempData)
  }


  function updateData (data) {
    tempData = data
    count++

    setTimeout(handleRecursiveFetch, 500)

  }

  function handleData(data) {
    console.log(data)
    commanders = data
    displayData(commanders)
  }


  function displayData(data) {
    console.log(data.container.json_dict.cardlists)
  }

  document.addEventListener("DOMContentLoaded", init)

  </script>
  <body>

  </body>
</html>
